{% extends "base.html" %}

{% block title %}Banquetes Catherin{% endblock %}

{% block content %}
<!-- Hero Section (Portada) -->
<section class="hero-section bg-dark text-white text-center py-5">
    <div class="container py-5">
        <h1 class="display-4 fw-bold">Banquetes Gourmet a tu Medida</h1>
        <p class="lead">Servicios de catering y banquetes para eventos especiales</p>
        <a href="#contacto" class="btn btn-primary btn-lg mt-3">¡Contáctame!</a>
    </div>
</section>

<!-- Servicios Destacados -->
<section class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-5">Nuestros Servicios</h2>
        <div class="row g-4">
            
            <div class="col-md-4">
                <!-- Carousel Salones -->
                <div id="carouselSalones" class="carousel slide" data-bs-ride="carousel">

                <!-- Indicators/dots -->
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#carouselSalones" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#carouselSalones" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#carouselSalones" data-bs-slide-to="2"></button>
                    <button type="button" data-bs-target="#carouselSalones" data-bs-slide-to="3"></button>
                </div>

                <!-- The slideshow/carousel -->
                <div class="carousel-inner">
                    <div class="carousel-item active">
                    <img src="{{ url_for('static', filename='img/Salones/Boda.jpeg') }}" class="d-block w-100" alt="Bodas">
                        <div class="carousel-caption">
                            <h3>Bodas</h3>
                            <p>"Dos almas, un camino"</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                    <img src="{{ url_for('static', filename='img/Salones/XV.jpeg') }}" class="d-block w-100" alt="XV años">
                        <div class="carousel-caption">
                            <h3>XV años</h3>
                            <p>"Un brindis para celebrar"</p>
                        </div> 
                    </div>
                    <div class="carousel-item">
                    <img src="{{ url_for('static', filename='img/Salones/Infantil.jpeg') }}" class="d-block w-100" alt="Infantiles">
                        <div class="carousel-caption">
                            <h3>Fiestas Infantiles</h3>
                            <p>"Celebremos jugando"</p>
                        </div>  
                    </div>
                    <div class="carousel-item">
                    <img src="{{ url_for('static', filename='img/Salones/Congreso.jpeg') }}" class="d-block w-100" alt="Congresos">
                        <div class="carousel-caption">
                            <h3>Congresos</h3>
                            <p>"Innovación y conexión"</p>
                        </div>  
                    </div>
                </div>

                <!-- Left and right controls/icons -->
                 <button class="carousel-control-prev" type="button" data-bs-target="#carouselSalones" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselSalones" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
                </div>
                
                <div class="card mt-3">
                    <div class="card-body">
                        <h5 class="card-title">Salones</h5>
                        <p class="card-text">Elige el espacio que será testigo de tus memorias.</p>
                        <a href="{{ url_for('salones_public') }}" class="btn btn-outline-primary mt-2">Ver más</a>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <!-- Carousel Banquetes-->
                <div id="carouselBanquetes" class="carousel slide" data-bs-ride="carousel">

                <!-- Indicators/dots -->
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#carouselBanquetes" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#carouselBanquetes" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#carouselBanquetes" data-bs-slide-to="2"></button>
                </div>

                <!-- The slideshow/carousel -->
                <div class="carousel-inner">
                    <div class="carousel-item active">
                    <img src="{{ url_for('static', filename='img/Banquetes/plato-destacado1.jpg') }}" class="d-block w-100" alt="Bebidas">
                    <div class="carousel-caption">
                        <h3>Bebidas</h3>
                        <p>"Contamos la mejor carta de vinos"</p>
                    </div>
                    </div>
                    <div class="carousel-item">
                    <img src="{{ url_for('static', filename='img/Banquetes/plato-destacado2.jpg') }}" class="d-block w-100" alt="Platillos">
                    <div class="carousel-caption">
                        <h3>Menú a 4 tiempos</h3>
                        <p>"Variedad en sabor y presentación"</p>
                    </div> 
                    </div>
                    <div class="carousel-item">
                    <img src="{{ url_for('static', filename='img/Banquetes/plato-destacado3.jpg') }}" class="d-block w-100" alt="Servicios de Café">
                    <div class="carousel-caption">
                        <h3>Servicios de café</h3>
                        <p>"El café más exquisito del mundo"</p>
                    </div>  
                    </div>
                </div>

                <!-- Left and right controls/icons -->
                 <button class="carousel-control-prev" type="button" data-bs-target="#carouselBanquetes" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselBanquetes" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
                </div>
                
                <div class="card mt-3">
                    <div class="card-body">
                        <h5 class="card-title">Banquetes</h5>
                        <p class="card-text">Menús personalizados para tu evento.</p>
                        <a href="{{ url_for('banquetes_public') }}" class="btn btn-outline-primary mt-2">Ver más</a>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <!-- Carousel Complementos -->
                <div id="carouselComplementos" class="carousel slide" data-bs-ride="carousel">

                <!-- Indicators/dots -->
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#carouselComplementos" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#carouselComplementos" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#carouselComplementos" data-bs-slide-to="2"></button>
                    <button type="button" data-bs-target="#carouselComplementos" data-bs-slide-to="3"></button>
                </div>

                <!-- The slideshow/carousel -->
                <div class="carousel-inner">
                    <div class="carousel-item active">
                    <img src="{{ url_for('static', filename='img/Complementos/Arroz rojo.jpeg') }}" class="d-block w-100" alt="Música">
                        <div class="carousel-caption">
                            <h3>Platos complemento</h3>
                            <p>"varios"</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                    <img src="{{ url_for('static', filename='img/Complementos/Salsa verde.jpeg') }}" class="d-block w-100" alt="Fotografía">
                        <div class="carousel-caption">
                            <h3>Salsas</h3>
                            <p>"Estilo y tipos varios"</p>
                        </div> 
                    </div>
                    <div class="carousel-item">
                    <img src="{{ url_for('static', filename='img/Complementos/Tortillas de harina.jpeg') }}" class="d-block w-100" alt="Inflables">
                        <div class="carousel-caption">
                            <h3>Tortillas</h3>
                            <p>"Harina y Maiz"</p>
                        </div>  
                    </div>
                    <div class="carousel-item">
                    <img src="{{ url_for('static', filename='img/Complementos/Totopos.jpeg') }}" class="d-block w-100" alt="Stands">
                        <div class="carousel-caption">
                            <h3>Botanas</h3>
                            <p>"totopos y +"</p>
                        </div>  
                    </div>
                </div>

                <!-- Left and right controls/icons -->
                 <button class="carousel-control-prev" type="button" data-bs-target="#carouselComplementos" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselComplementos" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
                </div>
                
                <div class="card mt-3">
                    <div class="card-body">
                        <h5 class="card-title">Complementos</h5>
                        <p class="card-text">Todo para tus eventos.</p>
                        <a href="{{ url_for('complementos_public') }}" class="btn btn-outline-primary mt-2">Ver más</a>
                    </div>
                </div>
            </div>

        <!-- <div class="card h-100">
                    <img src="{{ url_for('static', filename='img/plato-destacado1.jpg') }}" class="card-img-top" alt="Banquete para bodas">
                    <div class="card-body">
                        <h5 class="card-title">Salones</h5>
                        <p class="card-text">Elige el espacio que será testigo de tus memorias.</p>
                        <h5 class="card-title">Bodas</h5>
                        <p class="card-text">Menús personalizados para tu día especial.</p>
                    </div>
                </div> 
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <img src="{{ url_for('static', filename='img/plato-destacado2.jpg') }}" class="card-img-top" alt="Eventos corporativos">
                    <div class="card-body">
                        <h5 class="card-title">Platillos</h5>
                        <p class="card-text">Menús personalizados para tu día especial.</p>
                        <h5 class="card-title">Eventos Corporativos</h5>
                        <p class="card-text">Catering profesional para empresas.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <img src="{{ url_for('static', filename='img/plato-destacado3.jpg') }}" class="card-img-top" alt="Fiestas privadas">
                    <div class="card-body">
                        <h5 class="card-title">Algo más...</h5>
                        <p class="card-text">Conoce nuestros contactos con empresas para embellecer tus eventos</p>
                        <h5 class="card-title">Fiestas Privadas</h5>
                        <p class="card-text">Experiencia culinaria única en tu hogar.</p>
                    </div>
                </div>
            </div> 
        </div> -->
    </div>
</section>

<!-- Cotización -->
<section id="cotizacion" class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-5">Cotiza tu Evento</h2>
        <form method="POST" action="{{ url_for('cotizar') }}">
            <div class="row g-3">
                <!-- Salón -->
                <div class="col-md-4">
                    <label for="salon" class="form-label">Salón</label>
                    <select class="form-select" name="id_salon" required>
                        <option value="">Selecciona un salón</option>
                        {% for salon in salones %}
                            <option value="{{ salon.id }}" data-precio="{{ salon.precio }}"
                            {% if seleccionado and salon.id == seleccionado.id_salon %}selected{% endif %}>
                            {{ salon.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>
                <!-- Platillo -->
                <div class="col-md-4">
                    <label for="platillo" class="form-label">Platillo</label>
                    <select class="form-select" name="id_platillo" required>
                        <option value="">Selecciona un platillo</option>
                        {% for platillo in platillos %}
                            <option value="{{ platillo.id }}" data-precio="{{ platillo.precio }}"
                            {% if seleccionado and platillo.id == seleccionado.id_platillo %}selected{% endif %}>
                                {{ platillo.nombre }}
                            </option>
                        {% endfor %}
                    </select>

                </div>
                <!-- Complemento -->
                <div class="col-md-4">
                    <label for="complemento" class="form-label">Complemento</label>
                    <select class="form-select" name="id_complemento" required>
                        <option value="">Selecciona un complemento</option>
                        {% for complemento in complementos %}
                            <option value="{{ complemento.id }}" data-precio="{{ complemento.precio }}"
                            {% if seleccionado and complemento.id == seleccionado.id_complemento %}selected{% endif %}>
                                {{ complemento.nombre }}
                            </option>
                        {% endfor %}
                    </select>

                </div>
                <!-- Número de comensales -->
                <div class="col-md-4">
                    <label for="comensales" class="form-label">Número de comensales</label>
                    <input type="number" name="comensales" id="comensales" class="form-control"
                        value="{{ seleccionado.comensales if seleccionado else 1 }}" min="1" required>
                </div>

            </div>

            <div class="mt-3">
                <div class="mt-3">
                    <p><strong>Precio Salón:</strong> $<span id="precioSalon">
                        {{ seleccionado.precio_salon if seleccionado else 0 }}
                    </span></p>

                    <p><strong>Precio Platillo (x Comensales):</strong> $<span id="precioPlatillo">
                        {{ seleccionado.precio_platillo if seleccionado else 0 }}
                    </span></p>

                    <p><strong>Precio Complemento (x Comensales):</strong> $<span id="precioComplemento">
                        {{ seleccionado.precio_complemento if seleccionado else 0 }}
                    </span></p>
                </div>

            </div>


            <div class="text-center mt-4">
                <button type="submit" class="btn btn-primary btn-lg">Calcular Total</button>
            </div>

            {% if total %}
            <div class="alert alert-success mt-4 text-center">
                <strong>Total estimado:</strong> ${{ total }}
            </div>
            {% endif %}
            {% if total %}
            <div class="text-center mt-4">
                <a href="{{ url_for('index') }}" class="btn btn-secondary">
                    <i class="fa-solid fa-rotate-left"></i> Nueva Cotización
                </a>
            </div>
            {% endif %}

        </form>
    </div>
</section>

<!-- Cotizaciones -->
    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const selects = ['id_salon', 'id_platillo', 'id_complemento'];
        const spans = {
            id_salon: 'precioSalon',
            id_platillo: 'precioPlatillo',
            id_complemento: 'precioComplemento'
        };

        const comensalesInput = document.getElementById('comensales');

    function actualizarPrecios() {
        const comensales = parseInt(comensalesInput.value) || 1;

        selects.forEach(function (id) {
            const select = document.getElementsByName(id)[0];
            const span = document.getElementById(spans[id]);

            if (select && span) {
                const precioRaw = select.selectedOptions[0]?.getAttribute('data-precio') || 0;
                let precio = parseFloat(precioRaw);
                if (id !== 'id_salon') precio *= comensales;
                span.textContent = isNaN(precio) ? '0.00' : precio.toFixed(2);
            }
        });
    }

        selects.forEach(function (id) {
            const select = document.getElementsByName(id)[0];
            const span = document.getElementById(spans[id]);

            if (select && span) {
                select.addEventListener('change', function () {
                    const precioRaw = this.selectedOptions[0].getAttribute('data-precio');
                    const precio = parseFloat(precioRaw);
                    span.textContent = isNaN(precio) ? '0.00' : precio.toFixed(2);
                });
            }
        });
    });
    </script>



<!-- Sobre la Chef -->
<section class="py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6">
                <img src="{{ url_for('static', filename='img/chef-portada.jpg') }}" class="img-fluid rounded" alt="Chef">
            </div>
            <div class="col-md-6">
                <h2 class="mb-4">Sobre Mí</h2>
                <p>Con más de 10 años de experiencia en gastronomía, me especializo en crear banquetes memorables con ingredientes frescos y técnicas innovadoras.</p>
                <a href="{{ url_for('reservar') }}" class="btn btn-outline-primary" target="_blank">
                    Realizar reservación
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Testimonios -->
<section class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-5">Testimonios</h2>
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <p class="card-text">"¡Increíble banquete para nuestra boda! Todos quedaron impresionados."</p>
                        <footer class="blockquote-footer">María G.</footer>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <p class="card-text">"Profesionalismo y sabor excepcional en nuestro evento corporativo."</p>
                        <footer class="blockquote-footer">Carlos R.</footer>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <p class="card-text">"La mejor experiencia gastronómica en mi fiesta de cumpleaños."</p>
                        <footer class="blockquote-footer">Laura S.</footer>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contacto -->
<section id="contacto" class="py-5">
    <div class="container">
        <h2 class="text-center mb-5">Contacto</h2>
        <div class="row justify-content-center">
            <div class="col-md-8">
                <form>
                    <div class="mb-3">
                        <input type="text" class="form-control" placeholder="Nombre" required>
                    </div>
                    <div class="mb-3">
                        <input type="email" class="form-control" placeholder="Correo electrónico" required>
                    </div>
                    <div class="mb-3">
                        <textarea class="form-control" rows="5" placeholder="Mensaje" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Enviar Mensaje</button>
                </form>
            </div>
        </div>
    </div>
</section>


{% endblock %}